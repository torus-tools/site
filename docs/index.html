
              <!doctype html>
                <html lang="en">
                  
  <head>

        <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120987591-5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-120987591-5');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Documentation for Torus Host. All in one, fully open source hosting for jamstack websites.">
    <title>Torus Host: Docs</title>

       <!-- TWITTER META TAG -->
       <meta name="twitter:card" content="summary_large_image">
       <meta name="twitter:site" content="@Torus_Host">
       <meta name="twitter:creator" content="@lucas_kardo">
       <meta name="twitter:title" content="Torus Host - Documentation
       <meta name="twitter:description" content="All in one, fully open source hosting.  Just one command to deploy an enterprise-grade website.">
       <meta name="twitter:image" content="https://s3.amazonaws.com/images.pub/img/torus_host_card.png">
       
       <!-- Open Graph Meta Tag -->
       <meta property="og:url" content="https://torus.host" />
       <meta property="og:type" content="website" />
       <meta property="og:title" content="Torus Host - Documentation" />
       <meta property="og:description" content="All in one, fully open source hosting.  Just one command to deploy an enterprise-grade website."/>
       <meta property="og:image" content="https://s3.amazonaws.com/images.pub/img/torus_host_og.png" />
       

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <!-- Docs Stylesheet -->
    <link rel="stylesheet" href="../css/collapse.css">
    <link href="../css/docs.css" rel="stylesheet">
    <!-- Additional Stylesheets -->
    
    <!-- Favicon -->
        
  </head>

                <body id="page-top">
                
  <nav class="topnav" style="background-color: transparent;" id="myTopnav">
        <!-- TORUS LOGO -->
        <svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 108.55 80.65">
          <defs>
            <style class=>
              .cls-1, .cls-0, .cls-2, .cls-3, .cls-4 {fill:none;stroke:#f1f2f2;stroke-miterlimit:10;stroke-width:2px}
            </style>
          </defs>
          <g id="Layer_2" data-name="Layer 2">
            <g id="Layer_5" data-name="Layer 5">
              <ellipse class="cls-4 fade-4" cx="54.27" cy="49.34" rx="53.27" ry="18.57"/>
              <ellipse class="cls-4 fade-4" cx="54.27" cy="31.95" rx="53.27" ry="18.57"/>
              <ellipse class="cls-2 fade-2" cx="54.27" cy="14.36" rx="21.5" ry="8.8"/>
              <ellipse class="cls-3 fade-3" cx="54.27" cy="64.98" rx="42.09" ry="14.67"/>
              <ellipse class="cls-1 fade-1" cx="54.27" cy="24.27" rx="13.68" ry="6.32"/>
              <ellipse class="cls-2 fade-2" cx="54.27" cy="66.21" rx="21.5" ry="8.8"/>
              <ellipse class="cls-3 fade-3" cx="54.27" cy="15.67" rx="42.09" ry="14.67"/>
              <ellipse class="cls-1 fade-1" cx="54.27" cy="56.94" rx="13.68" ry="6.32"/>
              <circle class="cls-0 fade-0" cx="54.27" cy="40.7" r="9.97"/>
            </g>
          </g>
        </svg>
        
        <a href="../index.html" class="nav-logo active"><span>Torus</span></a>
        
        <div class="nav-links">
          <a href="../pricing.html" class="nav-link"><span>Pricing</span></a>
          <a href="../tools.html" class="nav-link"><span>Tools</span></a>
          <a href="index.html" class="nav-link"><span>Docs</span></a>
          <a href="https://github.com/torus-tools" class="nav-link"><img src="img/github_logo.svg" style="height: 30px;" 
            alt="github logo"></a>
        </div>
      
        <a href="javascript:void(0);" class="icon" onclick="myFunction()">
          <img height="24px" src="../img/nav.svg" alt="nav menu">
        </a>
      </nav>

  
                  <div class="d-lg-flex" id="wrapper">
                    
  <div class="mobibar" id="sidebar-wrapper">
    <div>
      <div class="list-group list-group-flush">
      <a href="#Torus_Host_Doc0" class="list-group-item list-group-item-action">Torus Host Docs</a><a href="#Intro4" class="list-group-item list-group-item-action">Intro</a><a href="#mission22" class="list-group-item list-group-item-action">mission</a>
      <div class="dropdown list-group-item p-0">
        <button class="dropbtn" name="Getting_Starte30-dropdown">Getting Started
          <i id="Getting_Starte30-dropdown-caret" class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content" id="Getting_Starte30-dropdown">
          <a href="#pre_requisistes44"><span>pre requisistes:</span></a><a href="#Quick_Start:54"><span>Quick Start:</span></a><a href="#Pre_defined_Tem84"><span>Pre defined Templates:</span></a>
        </div>
      </div>
      
      <div class="dropdown list-group-item p-0">
        <button class="dropbtn" name="How_it_works102-dropdown">How it works
          <i id="How_it_works102-dropdown-caret" class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content" id="How_it_works102-dropdown">
          <a href="#Overview106"><span>Overview</span></a><a href="#Stack_command_e116"><span>Stack command execution order</span></a><a href="#Stack_Creation132"><span>Stack Creation</span></a><a href="#Nameserver_tran138"><span>Nameserver transfers</span></a><a href="#Content_Upload144"><span>Content Upload</span></a>
        </div>
      </div>
      <a href="#Project_struct152" class="list-group-item list-group-item-action">Project structure</a>
      <div class="dropdown list-group-item p-0">
        <button class="dropbtn" name="CLI_Commands170-dropdown">CLI Commands
          <i id="CLI_Commands170-dropdown-caret" class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content" id="CLI_Commands170-dropdown">
          <a href="#Torus_help186"><span>Torus help</span></a><a href="#Torus_Init214"><span>Torus Init</span></a><a href="#Torus_Stack286"><span>Torus Stack</span></a><a href="#Torus_Content386"><span>Torus Content</span></a>
        </div>
      </div>
      
      <div class="dropdown list-group-item p-0">
        <button class="dropbtn" name="SDKs440-dropdown">SDKs
          <i id="SDKs440-dropdown-caret" class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content" id="SDKs440-dropdown">
          <a href="./stack.html"><span>Stack SDK</span></a><a href="./content.html"><span>Content SDK</span></a><a href="./domains.html"><span>Domains SDK</span></a>
        </div>
      </div>
      
      <div class="dropdown list-group-item p-0">
        <button class="dropbtn" name="Advanced_Confi450-dropdown">Advanced Configuration
          <i id="Advanced_Confi450-dropdown-caret" class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content" id="Advanced_Confi450-dropdown">
          <a href="#Torus_config_JS500"><span>Torus_config JSON file</span></a>
        </div>
      </div>
      <a href="#Contributing538" class="list-group-item list-group-item-action">Contributing</a>
      </div>
    </div>
  </div>
  
                    <div id="page-content-wrapper">
                      <div class="container docs">
                        <section id="Torus_Host_Doc0"><h1>Torus Host Docs</h1></section><section id="Intro4"><h1>Intro</h1><p>Torus Host is a fully open source deployment system for static (jam stack) websites that provides complete automation of the entire deployment process including domain operations, infrastructure provisioning and content delivery.  It features an easy to use multi command line interface and 3 node js SDKs.</p><p>With Torus you have a seamless deployment experience of an all-in-one service like Netlify, while still maintaining full control of your entire stack and deployment process. You are free to choose what resources you want to use, from which providers, and to customize them as you like.</p><p>Torus works works with any static website and most popular front end frameworks such as React, Gatsby js,  Vue, Svelte, Flutter, Ember and others. You can publish HTML/CSS/JS directly from your local directory or add continuous integration to your projects to automate the build process for your front end apps. </p><p>Torus currently supports AWS and Godaddy but more integrations with other cloud providers and domain registrars are coming soon.  </p></section><section id="mission22"><h1>mission</h1><ol><li>Enable design firms and freelancers to offer enterprise-grade hosting services without the need for devops experts or the extra $$$.</li><li> Give front-end developers a seamless deployment experience without sacrificing control.</li><li> Make it easy for developers/software companies to offer hosting within their applications. (SSG’s, CMS’s, domain registrars, etc)</li></ol></section><section id="Getting_Starte30"><h1>Getting Started</h1><p>In this example you will deploy a static website with a custom domain and HTTPS to an enterprise-grade edge network (AWS Cloudfront). </p><ul><li><strong>When using Torus Tools you are using your own AWS account from your own machine. Any charges incurred by your websites will be billed directly from AWS to your AWS account.</strong></li><li> <strong>Torus Tools does NOT have any access whatsoever to your AWS account/bill or API keys.</strong> </li></ul><h2 id=pre_requisistes44>pre requisistes:</h2><ul><li>An AWS account </li><li> Node. js  v.12+ and NPM </li><li> Have a custom domain</li><li> The latest version of the Torus CLI  <code class="code">npm i -g @torus-tools/cli</code></li></ul><h2 id=Quick_Start:54>Quick Start:</h2><strong>Step 1: One time global provider configuration</strong> <strong></strong><code class="code">torus init -g -p=aws</code><strong>Step 2:  One command deploy for your site</strong><code class="code">torus stack create prod -d=yoursite.com -r=godaddy</code><strong></strong>(Make sure to be in the root folder of your project.   If you are using a domain provider other than Goddady,  add  <code class="code">other</code> to the registrar flag. The nameservers will be displayed in the CLI, as the resources are being created, so you can add them to your domain provider manually)<strong>You are all done!</strong>   <p>Just be a little patient while the security certificate and resources are being created in AWS. </p><p>Remember you can always run <code class="code">torus help</code>  if you need more help.  </p><h2 id=Pre_defined_Tem84>Pre defined Templates:</h2><p>For an easier development workflow we have defined some setups that include Dev, Test and Prod (production). You can customize these by additionally providing flags.</p><strong>dev → test → prod</strong><ol><li><strong>Dev:</strong> public S3 bucket</li><li> <strong>Test:</strong> public S3 root bucket, www reroute bucket and a route53 hosted zone.</li><li> <strong>Prod:</strong> public S3 root bucket, www reroute bucket, route53 hosted zone, cloudfront distribution, ACM certificate</li></ol></section><section id="How_it_works102"><h1>How it works</h1><h2 id=Overview106>Overview</h2><p>Torus Hosting is made up of a multi command line interface and 3 SDKs; Stack, Domains and Content. The SDKs are meant to standardize operations for domains, DNS, other infrastructure components and content across different cloud/domian providers. On the other hand, The CLI facilitates the user’s interaction with the SDKs, providing a seamless developer experience with unmatched flexibility.</p> <img src="../img/sdk_cli_rel.png" class="w-100 p-5" alt=""> <h2 id=Stack_command_e116>Stack command execution order</h2><p>The torus stack method and the respective stack command in the CLI help you deploy the required infrastructure pieces for a modern static site inside a single cloudformation JSON template. Depending on the options provided within the config object the command will generate different pieces of infrastructure. If you have an existing stack, any options provided will update your current stack. If you have existing resources for the given websites domain that live outside of your cloudformation stack, they will be imported into the stack.</p> <img src="../img/stack_command_order.png" class="w-100 p-5"  alt="execution order of the torus stack command"> <p>You are always free to customize the generated cloudformation template or its resources individually in any way you want using the AWS console/CLIs/SDKs and/or the torus stack SDK/CLI command. You can also push the arjan_config to github and enable other team-members (with permission) to collaborate on the stack. Additionally the stack command also facilitates registrar, DNS, and content operations in a specific order.</p><h2 id=Stack_Creation132>Stack Creation</h2><p>For a production stack, the creation of infrastructure happens in two parts. First the stack creates the s3 bucket (storage), bucket policy, www reroute bucket and optionally the route53 hosted zone (DNS). Then the stack is updated adding an ACM certificate and cloudfront distribution (CDN).</p><h2 id=Nameserver_tran138>Nameserver transfers</h2><p>Torus will automatically transfer nameservers for domains registered in godaddy.com. If you are using another domain registrar the CLI will output the corresponding nameservers and wait for you to transfer them. Please beware that some registrars might take longer than others to complete the nameserver transfer. With godaddy, as well as namecheap the transfer is usually pretty quick but this may vary. Its always a good idea to check with a free DNS tool like <a href='https://mxtoolbox.com/'>mxtoolbox.com</a> if your nameservers have propagatyed correctly.</p><h2 id=Content_Upload144>Content Upload</h2><p>By default, the torus stack command will also upload all the files in your current working into the s3 bucket deployed. The operation will ingore any sensitive files that are in your gitignore. additionally, if you have other files that you do want to commit to git, but you dont want to upload into your site you can create an additional  .torusignore file. Typical files/dirs that you may add into torusignore include .git, .gitignore, .github, package.json, etc. You can auto-generate this file with these defaults by running <code class="code">torus init</code> inside your project.</p></section><section id="Project_struct152"><h1>Project structure</h1><pre class="pre code"><code>  |-- .torusignore
  |-- torus
    |--config.json
    |--reosurces.json
    |--template.json
</pre></code></section><section id="CLI_Commands170"><h1>CLI Commands</h1><p>The Arjan CLI lets you easily run and overwrite local configurations with flags/arguments. This make it really flexible and easy to configure and provides a flexible developer experience. Generally every command in the CLI performs the following actions:</p><ol><li>read global env variables</li><li> set process env variables</li><li> create/read the torus/config.json file</li><li> read the .env file</li><li> execute the command</li></ol><h2 id=Torus_help186>Torus help</h2><p>display help for torus</p><pre class="pre code"><code>USAGE
  $ torus help [COMMAND]

ARGUMENTS
  COMMAND  command to show help for

OPTIONS
</pre></code>      --all  see all commands in CLI<h2 id=Torus_Init214>Torus Init</h2><p>Configure torus globally in your machine, or on a per-project basis</p><pre class="pre code"><code>USAGE
  $ torus init

OPTIONS
</pre></code>      -d, --domain=domain<pre class="pre code"><code>      The valid desired/existing domain of your site i.e. yoursite.com

</pre></code>      -g, --global<pre class="pre code"><code>      Create a global torus configuration file. The command will guide you through the steps to generate the required API 
      keys for each of your desired providers, set up your global environment variables and your deisred default settings.

</pre></code>      -p, --providers=aws|godaddy<pre class="pre code"><code>      Desired cloud/domain providers to be used with torus. You must have an existing account in all of the providers you 
      choose.

</pre></code>      -r,       --region=us-east-2|us-east-1|us-west-1|us-west-2|af-south-1|ap-east-1|ap-south-1|ap-northeast-2|ap-southeast-1|ap-sout<pre class="pre code"><code>  heast-2|ap-northeast-1|ca-central-1|cn-north-1|cn-northwest-1|eu-central-1|eu-west-1|eu-west-2|eu-west-3|eu-north-1|me
</pre></code>      -south-1|sa-east-1|us-gov-east-1|us-gov-west-1<pre class="pre code"><code>      [default: us-east-1] Desired AWS region

</pre></code>      -u, --user=user<pre class="pre code"><code>      [default: torus_admin] Desired name for the AWS IAM user

DESCRIPTION
  ...
  The init command helps you configure torus in your site/project. Providing the -g (--global) flag helps you configure 
  torus globally (for all of your projects). When using the torus CLI, you can always overwrite global settings by 
  including a project config file. You can also overwrite global environment variables by including a .env file. If you 
  are using the init command without the -g flag make sure to run it from the root of your project.
</pre></code><h2 id=Torus_Stack286>Torus Stack</h2><p>All-in-one deployment solution for static sites in AWS. Creates the required infrastructure, carries out the necessary domain/dns operations and uploads your website content.</p><pre class="pre code"><code>USAGE
  $ torus stack ACTION [SETUP]

ARGUMENTS
  ACTION  (create|update|import|delete|pull|push) choose an action to perform. you can create, update, import your stack
          or upload files to your bucket.

  SETUP   (dev|test|prod|custom) [default: dev] setup for the site - dev, test, production or custom

OPTIONS
</pre></code>      -b, --bucket=aws|true                   Enables a cloud storage bucket to be used as the websites origin. You can<pre class="pre code"><code>                                          provide this flag without the =string to use aws s3.

</pre></code>      -c, --cdn=aws|true                      Add a CDN to your site. CDNs enable faster website load times by caching your<pre class="pre code"><code>                                          content around the globe (the edge). You can provide this flag without the
                                          =string to use aws Cloudfront.

</pre></code>      -d, --domain=domain                     The domain of your site i.e. yoursite.com<pre class="pre code"><code>
</pre></code>      -e, --error=error                       name of the error document. Default is error.html<pre class="pre code"><code>
</pre></code>      -i, --index=index                       name of the index document. Default is index.html<pre class="pre code"><code>
</pre></code>      -o, --overwrite                         By default, torus always reads your template in the cloud and only adds<pre class="pre code"><code>                                          changes (updated resources or additional resources). If you want to eliminate
                                          the resources that arent prvoided in the CLI flags you can add this flag.

</pre></code>      -p, --publish                           Publish the sites content<pre class="pre code"><code>
</pre></code>      -r, --registrar=aws|godaddy|other|true  The current domain name registrar of your sites domain. Using AWS or godaddy<pre class="pre code"><code>                                          enables automatic namserver updates if the DNS provider is different to the
                                          registrar. Selecting other will require manual nameserver updates. true
                                          evaluates to other.

</pre></code>      -s, --ssl=aws|true                      Enables https by creating and validating an SSL certificate for your site. You<pre class="pre code"><code>                                          can provide this flag without the =string to use aws certificate manager.

</pre></code>      -w, --www=true                          creates a www reroute bucket.<pre class="pre code"><code>
</pre></code>      --dns=aws|godaddy|other|true            Desired DNS provider for your site. The aws option adds a route53 hosted zone<pre class="pre code"><code>                                          to your stack. You can provide this flag without the =string to use aws.

DESCRIPTION
  ...
  Deploy static sites to the AWS Cloud using Cloudformation templates.
</pre></code><h2 id=Torus_Content386>Torus Content</h2><p>List/download/upload/delete all of your content (or the specified files).</p><pre class="pre code"><code>USAGE
  $ torus content ACTION [FILES]

ARGUMENTS
  ACTION  (list|download|upload|delete) given action to carry out with the content of your site

  FILES   local paths or object keys of the files/directories you want to upload/download to/from your bucket. For
          example suppose theres a directory img inside the cwd the path of image1.jpg would be img/image1.jpg. For
          local files the root is the current working directory unless specifiecd otherwise with the -i flag. By
          default, if no paths are provided all files/dirs in the root will be used.

OPTIONS
</pre></code>      -a, --all            Upload all files. By default only updated files are uploaded.      -d, --domain=domain  Domain of your site (i.e. yoursite.com).      -i, --input=input    Path of the root directory of your project (if different to the current working driectory).      -o, --output=output  [default: ./] Path to save downloaded content into. Default is the current working directory.      -r, --reset          Reset the cache in all edge locations for the given files.      -s, --sort           Sorts listed files by last modified date.<pre class="pre code"><code>
DESCRIPTION
  ...
  By default only modified files are uploaded; to upload all files provide the --all flag. To automatically update cache 
  in cloudfront for the given files add the --reset flag.
</pre></code></section><section id="Advanced_Confi450"><h1>Advanced Configuration</h1><p>The global configuration file sotred in <code class="code">~/.aws/config</code> holds the standard environment variables that the user intends to use on most of their projects. the global config file uses a simple toml format and it includes both the API keys/env variables for each cloud/domain provider as well as the providers configuration that sets which provider should be used for which resource. The codeblock bellow shows a sample gloabl config file for a user that usually deploys sites with a Godaddy domain, AWS Bucket, AWS route53 DNS, AWS Cloudfront CDN, and AWS ACM Certificate. Notice that for the aws provider we dont have to provide API keys as we can reference the AWS config in <code class="code">~/.aws/credentials</code>. If you dont have a global AWS config you can also provide the API keys directly as <code class="code">access_key_id</code> and <code class="code">secret_access_key</code>.</p><pre class="pre code"><code>[aws]
region=us-east-1
profile=default

[godaddy]
api_key=fe98wkf287e927198dnj87589hjspi
secret_key=iufyewuiyf8746r98370

[providers]
domain=godaddy
bucket=aws
cdn=aws
dns=aws
https=aws
</pre></code><p>The diagram bellow represents the flow of configuration variables.</p> <img src="../img/torus-config.png" class="w-100 p-5" alt=""> <h2 id=Torus_config_JS500>Torus_config JSON file</h2><p>every project will have a torus config file that will contain the default providers for that project. You may modify this config file manually at any time or on a per-instance basis by providing CLI flags</p><pre class="pre code"><code>const config = {
  index:"index.html",
  error:"error.html",
  last_deployment:"",
  providers: {
    registrar: 'godaddy',
    bucket: 'aws',
    cdn: 'aws',
    dns: 'aws',
    ssl: 'aws'
  }
}
</pre></code></section><section id="Contributing538"><h1>Contributing</h1><p>Anyone can contribute to Torus. All you have to do is fork the repository and submit a pull request. If you are interested in continually improving Torus and helping us tackle our weekly sprints, contact us and we will let you into our organization. This way you can edit and prioritize issues in the project board and you can assign yourself to issues that you plan on completing.</p><p>If you are making your first contribution to Torus we recommend grabbing an issue from the backlog that isn't at the top. This way you wont be working on an issue that someone else from the core team will work on, otherwise please contact us through slack.</p>
                        </section>
                      </div>
                      
<footer class="bg-black sticky-bottom text-center text-white py-4">
  <div class="container">
    <div class="row">
      <div class="col-sm-6">
        <p class="text-lg-left">Copyright &copy; Super Easy Forms 2019</p>
      </div>
      <div class="col-sm-6">
        <p class="text-lg-right">powered by Super Easy Docs</a></p>
      </div>
    </div>
  </div>
</footer>

                    </div>
                  </div>
                  
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
<script src="../js/docs.js"></script>

                </body>
              </html>        
              